#!/usr/bin/env ruby

directory = ARGV[0]

files = Dir.glob(File.join(directory, '*qseq*.txt'))

groups = files.group_by do |path|
  d = File.basename(path).split('_')
  { :lane => d[1], :chunk => d[3] }
end

$stderr.puts "Found #{files.size} files in #{groups.size} Chunks"

groups.each_pair do |k, files|

  left, right = files.sort

  puts "#{left} #{right}"
end
